# primitive-docs

Unified documentation site for Primitive Labs projects, built with **VitePress** and hosted on **GitHub Repo Pages**.

## Structure

- `docs/`: VitePress site (manual guides + generated reference)
  - `docs/guide/**`: hand-written docs
  - `docs/reference/**`: generated reference docs (**committed**)
- `library_repos/**`: git submodules (editable source-of-truth repos)
  - `library_repos/js-bao`
  - `library_repos/js-bao-wss`
  - `library_repos/primitive-app-dev`
- `packages/**`: symlinks into `library_repos/**` that preserve the public package layout used by scripts/docs
  - `packages/js-bao` → `../library_repos/js-bao`
  - `packages/js-bao-wss-client` → `../library_repos/js-bao-wss/src/client`
  - `packages/primitive-app` → `../library_repos/primitive-app-dev/primitive-app`

## Setup

Clone with submodules:

```bash
git clone --recurse-submodules git@github.com:Primitive-Labs/primitive-docs.git
cd primitive-docs
```

Or if already cloned:

```bash
pnpm submodules:init
```

Install root deps:

```bash
pnpm install
```

## Local development

Regenerates reference docs, then starts the dev server:

```bash
pnpm docs:dev
```

## Build

Updates submodules to latest tracked `main` (does **not** auto-commit pointers), regenerates reference, then builds:

```bash
pnpm docs:build
```

## Publish (manual, commits built site to `gh-pages`)

```bash
pnpm docs:publish
```

## Publish (recommended: GitHub Actions auto-deploy)

This repo includes a workflow at `.github/workflows/deploy-docs.yml` that builds and pushes to the `gh-pages` branch on every push to `main`.

GitHub Pages config:

- Use **Repo Pages** for this repo
- Set Pages source to **Deploy from branch** → `gh-pages` / `/ (root)`

GitHub Pages config:

- Use **Repo Pages** for this repo
- Set Pages source to **Deploy from branch** → `gh-pages` / `/ (root)`
- VitePress `base` is set to `/primitive-docs/` in `docs/.vitepress/config.ts`

## Notes on reference generation

- TypeScript API docs are generated with **TypeDoc** into:
  - `docs/reference/js-bao/api/**`
  - `docs/reference/js-bao-wss-client/api/**`
- Vue component docs are generated with **vue-docgen-cli** into:
  - `docs/reference/primitive-app/components/**`
- The “Reference” sidebar + landing page are generated by `scripts/gen-reference-index.mjs`.

If Vue doc generation fails due to upstream CLI/config differences, run:

```bash
pnpm exec vue-docgen --help
```

and adjust `scripts/vue-docgen.config.cjs`.


