<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js-bao | Primitive Docs</title>
    <meta name="description" content="Unified documentation for Primitive Labs libraries and apps.">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/primitive-docs/assets/style.tJDdAgbl.css" as="style">
    <link rel="preload stylesheet" href="/primitive-docs/vp-icons.css" as="style">
    
    <script type="module" src="/primitive-docs/assets/app.BnWB_wus.js"></script>
    <link rel="preload" href="/primitive-docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/primitive-docs/assets/chunks/theme.Bh4Y5foJ.js">
    <link rel="modulepreload" href="/primitive-docs/assets/chunks/framework.HLg5PcC2.js">
    <link rel="modulepreload" href="/primitive-docs/assets/reference_js-bao_api_README.md.BgbSb-Rd.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b0764d2a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-5d1f9f48></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-5d1f9f48>Skip to content</a><!--]--><!----><header class="VPNav" data-v-b0764d2a data-v-6119ff33><div class="VPNavBar" data-v-6119ff33 data-v-2dbb9713><div class="wrapper" data-v-2dbb9713><div class="container" data-v-2dbb9713><div class="title" data-v-2dbb9713><div class="VPNavBarTitle has-sidebar" data-v-2dbb9713 data-v-5e82587f><a class="title" href="/primitive-docs/" data-v-5e82587f><!--[--><!--]--><!----><span data-v-5e82587f>Primitive Docs</span><!--[--><!--]--></a></div></div><div class="content" data-v-2dbb9713><div class="content-body" data-v-2dbb9713><!--[--><!--]--><div class="VPNavBarSearch search" data-v-2dbb9713><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-2dbb9713 data-v-d518d07c><span id="main-nav-aria-label" class="visually-hidden" data-v-d518d07c> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/primitive-docs/" tabindex="0" data-v-d518d07c data-v-9433881f><!--[--><span data-v-9433881f>Docs</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-2dbb9713 data-v-bc571f04><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bc571f04 data-v-4d1c2753 data-v-b3c2a5b8><span class="check" data-v-b3c2a5b8><span class="icon" data-v-b3c2a5b8><!--[--><span class="vpi-sun sun" data-v-4d1c2753></span><span class="vpi-moon moon" data-v-4d1c2753></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-2dbb9713 data-v-60837f6f data-v-2f8524cd><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Primitive-Labs/primitive-docs" aria-label="github" target="_blank" rel="me noopener" data-v-2f8524cd data-v-ccbf95f3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-2dbb9713 data-v-67e8dfe6 data-v-63f513c2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-63f513c2><span class="vpi-more-horizontal icon" data-v-63f513c2></span></button><div class="menu" data-v-63f513c2><div class="VPMenu" data-v-63f513c2 data-v-0315ab04><!----><!--[--><!--[--><!----><div class="group" data-v-67e8dfe6><div class="item appearance" data-v-67e8dfe6><p class="label" data-v-67e8dfe6>Appearance</p><div class="appearance-action" data-v-67e8dfe6><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-67e8dfe6 data-v-4d1c2753 data-v-b3c2a5b8><span class="check" data-v-b3c2a5b8><span class="icon" data-v-b3c2a5b8><!--[--><span class="vpi-sun sun" data-v-4d1c2753></span><span class="vpi-moon moon" data-v-4d1c2753></span><!--]--></span></span></button></div></div></div><div class="group" data-v-67e8dfe6><div class="item social-links" data-v-67e8dfe6><div class="VPSocialLinks social-links-list" data-v-67e8dfe6 data-v-2f8524cd><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Primitive-Labs/primitive-docs" aria-label="github" target="_blank" rel="me noopener" data-v-2f8524cd data-v-ccbf95f3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-2dbb9713 data-v-89f60fe8><span class="container" data-v-89f60fe8><span class="top" data-v-89f60fe8></span><span class="middle" data-v-89f60fe8></span><span class="bottom" data-v-89f60fe8></span></span></button></div></div></div></div><div class="divider" data-v-2dbb9713><div class="divider-line" data-v-2dbb9713></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-b0764d2a data-v-e15f588a><div class="container" data-v-e15f588a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-e15f588a><span class="vpi-align-left menu-icon" data-v-e15f588a></span><span class="menu-text" data-v-e15f588a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-e15f588a data-v-760341c1><button data-v-760341c1>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-b0764d2a data-v-6b9216e1><div class="curtain" data-v-6b9216e1></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-6b9216e1><span class="visually-hidden" id="sidebar-aria-label" data-v-6b9216e1> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-821bb7df><section class="VPSidebarItem level-0 collapsible" data-v-821bb7df data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h2 class="text" data-v-653fc4a4>Getting Started</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-1 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/getting-started/page-1.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>Page 1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/getting-started/page-2.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>Page 2</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-821bb7df><section class="VPSidebarItem level-0 collapsible collapsed" data-v-821bb7df data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h2 class="text" data-v-653fc4a4>Reference</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h3 class="text" data-v-653fc4a4>primitive-app</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-2 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/createPrimitiveApp.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>createPrimitiveApp</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Components</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><section class="VPSidebarItem level-3" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h5 class="text" data-v-653fc4a4>Auth</h5><!----></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/auth/PrimitiveLogin.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveLogin</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/auth/PrimitiveLogout.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveLogout</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/auth/PrimitiveOauthCallback.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveOauthCallback</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-3" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h5 class="text" data-v-653fc4a4>Documents</h5><!----></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/documents/PrimitiveManageDocuments.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveManageDocuments</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/documents/PrimitiveShareDocumentDialog.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveShareDocumentDialog</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/documents/PrimitiveSingleDocumentSwitcher.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveSingleDocumentSwitcher</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-3" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h5 class="text" data-v-653fc4a4>Navigation</h5><!----></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/navigation/PrimitiveAppBreadcrumb.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveAppBreadcrumb</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/navigation/PrimitiveAppSidebarHeader.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveAppSidebarHeader</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/navigation/PrimitiveBottomNav.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveBottomNav</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/navigation/PrimitiveNavigationBadge.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveNavigationBadge</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/navigation/PrimitiveSidebarNav.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveSidebarNav</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/navigation/PrimitiveUserMenu.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveUserMenu</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-3" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h5 class="text" data-v-653fc4a4>Shared</h5><!----></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/shared/DeleteConfirmationDialog.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DeleteConfirmationDialog</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/shared/PrimitiveLogoSpinner.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveLogoSpinner</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/components/shared/PrimitiveSkeletonGate.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveSkeletonGate</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Layouts</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/layouts/PrimitiveAppLayout.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveAppLayout</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/layouts/PrimitiveLoginLayout.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveLoginLayout</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/layouts/PrimitiveStaticLayout.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveStaticLayout</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Pages</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/components/pages/PrimitiveNotFound.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PrimitiveNotFound</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Utils</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/utils/Logger.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>Logger</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Composables</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/composables/useJsBaoDataLoader.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>useJsBaoDataLoader</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/composables/useTheme.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>useTheme</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Config</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/config/app-config.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>app-config</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/config/env-config.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>env-config</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/config/index.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>index</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/primitive-app/config/navigation-config.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>navigation-config</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h3 class="text" data-v-653fc4a4>js-bao-wss-client</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Classes</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/classes/JsBaoClient.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>JsBaoClient</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/classes/JsBaoError.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>JsBaoError</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Functions</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/functions/initializeClient.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>initializeClient</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/functions/isJsBaoError.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>isJsBaoError</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Interfaces</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/AnalyticsAutoEventsOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>AnalyticsAutoEventsOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/AnalyticsClient.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>AnalyticsClient</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/AnalyticsEventInput.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>AnalyticsEventInput</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/AuthStateEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>AuthStateEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/BasicUserInfo.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>BasicUserInfo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/BlobUploadCompletedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>BlobUploadCompletedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/BlobUploadFailedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>BlobUploadFailedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/BlobUploadProgressEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>BlobUploadProgressEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/CacheFacade.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>CacheFacade</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/DocumentAccessResult.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentAccessResult</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/DocumentCreateCommitFailedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentCreateCommitFailedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/DocumentEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/DocumentInfo.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentInfo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/DocumentInvitation.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentInvitation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/DocumentInvitationResponse.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentInvitationResponse</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/DocumentMetadataChangedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentMetadataChangedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/DocumentPermissionEntry.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentPermissionEntry</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/GeminiGenerateRawOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiGenerateRawOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/GeminiGenerateResult.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiGenerateResult</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/GeminiMessage.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiMessage</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/GeminiModelSummary.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiModelSummary</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/GeminiPromptOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiPromptOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/GeminiStructuredOutput.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiStructuredOutput</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/IntegrationCallRequest.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>IntegrationCallRequest</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/IntegrationCallResponse.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>IntegrationCallResponse</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/IntegrationsAPI.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>IntegrationsAPI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/InvitationEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>InvitationEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/JsBaoClientOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>JsBaoClientOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/JsBaoEvents.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>JsBaoEvents</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/LlmChatOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>LlmChatOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/MeUpdatedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>MeUpdatedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/MeUpdateFailedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>MeUpdateFailedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/NetworkModeEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>NetworkModeEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/OfflineAuthEnabledEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>OfflineAuthEnabledEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/OfflineAuthExpiringSoonEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>OfflineAuthExpiringSoonEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/OfflineAuthFailedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>OfflineAuthFailedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/OfflineAuthRenewedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>OfflineAuthRenewedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/OfflineAuthUnlockedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>OfflineAuthUnlockedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/PendingCreateCommittedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PendingCreateCommittedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/PendingCreateFailedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PendingCreateFailedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/PermissionEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PermissionEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/ReasoningOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>ReasoningOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/SessionInfo.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>SessionInfo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/StatusChangedEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>StatusChangedEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/interfaces/UserProfile.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>UserProfile</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Type Aliases</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/type-aliases/GeminiContentPart.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiContentPart</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/type-aliases/GeminiGenerateOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiGenerateOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/type-aliases/GeminiRole.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>GeminiRole</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/type-aliases/JsBaoErrorCode.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>JsBaoErrorCode</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao-wss-client/api/type-aliases/TypedModelConstructor.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>TypedModelConstructor</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h3 class="text" data-v-653fc4a4>js-bao</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Classes</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/BaseModel.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>BaseModel</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/DatabaseEngine.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DatabaseEngine</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/DocumentClosedError.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentClosedError</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/DocumentResolutionError.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentResolutionError</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/Logger.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>Logger</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/ModelRegistry.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>ModelRegistry</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/RecordNotFoundError.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>RecordNotFoundError</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/StringSet.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>StringSet</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/classes/UniqueConstraintViolationError.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>UniqueConstraintViolationError</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Functions</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/attachAndRegisterModel.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>attachAndRegisterModel</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/attachSchemaToClass.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>attachSchemaToClass</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/autoRegisterModel.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>autoRegisterModel</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/createModelClass.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>createModelClass</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/defineModelSchema.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>defineModelSchema</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/dumpYDocToPlain.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>dumpYDocToPlain</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/Field.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>Field</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/generateULID.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>generateULID</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/initJsBao.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>initJsBao</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/Model.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>Model</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/resetJsBao.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>resetJsBao</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/functions/summarizePlainYDoc.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>summarizePlainYDoc</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Interfaces</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/ConnectedDocument.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>ConnectedDocument</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/DatabaseConfig.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DatabaseConfig</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/DocumentConnectionEvent.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentConnectionEvent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/DocumentManager.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentManager</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/DumpOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DumpOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/DumpSummary.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DumpSummary</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/DumpSummaryEntry.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DumpSummaryEntry</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/FieldOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>FieldOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/InitJsBaoOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>InitJsBaoOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/InitJsBaoResult.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>InitJsBaoResult</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/ModelOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>ModelOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/PaginatedResult.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PaginatedResult</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/PaginationOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PaginationOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/QueryOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>QueryOptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/interfaces/SaveOptions.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>SaveOptions</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-653fc4a4 data-v-653fc4a4><div class="item" role="button" tabindex="0" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><h4 class="text" data-v-653fc4a4>Type Aliases</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-653fc4a4><span class="vpi-chevron-right caret-icon" data-v-653fc4a4></span></div></div><div class="items" data-v-653fc4a4><!--[--><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/type-aliases/DocumentConnectionCallback.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentConnectionCallback</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/type-aliases/DocumentFilter.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentFilter</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/type-aliases/DocumentPermissionHint.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>DocumentPermissionHint</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/type-aliases/InferAttrs.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>InferAttrs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/type-aliases/ModelConstructor.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>ModelConstructor</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/type-aliases/PlainYDoc.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>PlainYDoc</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/type-aliases/ProjectionSpec.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>ProjectionSpec</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-653fc4a4 data-v-653fc4a4><div class="item" data-v-653fc4a4><div class="indicator" data-v-653fc4a4></div><a class="VPLink link link" href="/primitive-docs/reference/js-bao/api/type-aliases/QueryResult.html" data-v-653fc4a4><!--[--><p class="text" data-v-653fc4a4>QueryResult</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b0764d2a data-v-a28c2434><div class="VPDoc has-sidebar has-aside" data-v-a28c2434 data-v-f13de798><!--[--><!--]--><div class="container" data-v-f13de798><div class="aside" data-v-f13de798><div class="aside-curtain" data-v-f13de798></div><div class="aside-container" data-v-f13de798><div class="aside-content" data-v-f13de798><div class="VPDocAside" data-v-f13de798 data-v-5681380b><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-5681380b data-v-2198ba7b><div class="content" data-v-2198ba7b><div class="outline-marker" data-v-2198ba7b></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-2198ba7b>On this page</div><ul class="VPDocOutlineItem root" data-v-2198ba7b data-v-662b38a8><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-5681380b></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f13de798><div class="content-container" data-v-f13de798><!--[--><!--]--><main class="main" data-v-f13de798><div style="position:relative;" class="vp-doc _primitive-docs_reference_js-bao_api_README" data-v-f13de798><div><p><strong>js-bao</strong></p><hr><h1 id="js-bao" tabindex="-1">js-bao <a class="header-anchor" href="#js-bao" aria-label="Permalink to js-bao"></a></h1><p>A lightweight, reactive ODM (Object-Document Mapper) built on top of <a href="https://github.com/yjs/yjs" target="_blank" rel="noreferrer">Yjs</a> for collaborative, offline-first applications. It allows you to define data models, persist them in Yjs shared types, and query them using a modern document-style API through pluggable database engines like SQL.js.</p><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to Features"></a></h2><ul><li><strong>Schema-First Models</strong>: Define your data schema with <code>defineModelSchema</code> and attach it to plain <code>BaseModel</code> subclasses (via <code>attachAndRegisterModel</code>) for a single source of truth and native property accessors.</li><li><strong>Yjs Integration</strong>: Data is stored in Yjs <code>Y.Map</code>s, enabling real-time collaboration and automatic data synchronization.</li><li><strong>Multi-Document Support</strong>: Connect and manage multiple Y.Doc instances with flexible document permissions.</li><li><strong>Document-Style Queries</strong>: Modern, MongoDB-like query API with filtering, projection, and aggregation.</li><li><strong>Cursor-Based Pagination</strong>: Efficient pagination with forward/backward navigation and stable cursors.</li><li><strong>Advanced Aggregation</strong>: Group, count, sum, average, and perform statistical operations on your data.</li><li><strong>StringSet Support</strong>: Special field type for tag-like data with efficient membership queries and faceting.</li><li><strong>Pluggable Database Engines</strong>: <ul><li>Currently supports <strong>SQL.js</strong> (SQLite compiled to WebAssembly).</li></ul></li><li><strong>Transactional Operations</strong>: Ensures atomicity for database modifications.</li><li><strong>TypeScript First</strong>: Written in TypeScript with strong type safety.</li><li><strong>Multi-platform</strong>: Supports both browser and Node.js environments</li><li><strong>Type-safe</strong>: Full TypeScript support (constructor + instance attrs inferred)</li><li><strong>Proxy-free runtime</strong>: Native getters/setters wired per schema field</li></ul><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to Installation"></a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> js-bao</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjs</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> js-bao</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjs</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> js-bao</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># For SQL.js engine:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sql.js</span></span></code></pre></div><h3 id="optional-dependencies" tabindex="-1">Optional Dependencies <a class="header-anchor" href="#optional-dependencies" aria-label="Permalink to Optional Dependencies"></a></h3><p>For Node.js environments, you can install native database engines:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># For SQLite support in Node.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> better-sqlite3</span></span></code></pre></div><h2 id="platform-support" tabindex="-1">Platform Support <a class="header-anchor" href="#platform-support" aria-label="Permalink to Platform Support"></a></h2><h3 id="browser" tabindex="-1">Browser <a class="header-anchor" href="#browser" aria-label="Permalink to Browser"></a></h3><ul><li><strong>SQL.js (SQLite WASM)</strong>: In-memory SQLite database</li></ul><h3 id="node-js" tabindex="-1">Node.js <a class="header-anchor" href="#node-js" aria-label="Permalink to Node.js"></a></h3><ul><li><strong>better-sqlite3</strong>: Native SQLite with file system support</li><li><strong>SQL.js</strong>: SQLite WASM (fallback option)</li></ul><h2 id="core-concepts" tabindex="-1">Core Concepts <a class="header-anchor" href="#core-concepts" aria-label="Permalink to Core Concepts"></a></h2><ul><li><strong>Models</strong>: Plain classes that extend <code>BaseModel</code>, defined alongside a <code>defineModelSchema</code> object. <code>attachAndRegisterModel</code> wires the schema and registers the class (e.g., <code>User</code>, <code>Product</code>).</li><li><strong>Fields</strong>: Properties declared inside <code>defineModelSchema</code> with full metadata (<code>type</code>, <code>default</code>, <code>indexed</code>, etc.).</li><li><strong>Database Engines</strong>: In-memory databases (like SQL.js) that mirror the data from Yjs for querying.</li><li><strong>Document Queries</strong>: MongoDB-style queries using filters, projections, and aggregations instead of SQL.</li><li><strong>Multi-Document Management</strong>: Connect and manage multiple Y.Doc instances with read/read-write permissions.</li><li><strong><code>initJsBao</code></strong>: The main function to set up the library and initialize the database engine and models.</li></ul><h2 id="defining-models-schema-first-no-decorators" tabindex="-1">Defining Models (Schema-First, No Decorators) <a class="header-anchor" href="#defining-models-schema-first-no-decorators" aria-label="Permalink to Defining Models (Schema-First, No Decorators)"></a></h2><p>Each model file keeps the schema, class, and registration together:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BaseModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  defineModelSchema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attachAndRegisterModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  InferAttrs,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> statementSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineModelSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;statements&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, autoAssign: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    accountName: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, default: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currency: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, default: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;USD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    startDate: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    endDate: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    endingValue: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, default: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    holdingsIncluded: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;boolean&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, default: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    uniqueConstraints: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;statement_period_per_account&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fields: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;accountName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;startDate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;endDate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StatementAttrs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InferAttrs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> statementSchema&gt;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Statement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StatementAttrs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Statement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> durationDays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.endDate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">??</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.startDate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">??</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 24</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findByAccount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">accountName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Statement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryOne</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ accountName });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attachAndRegisterModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Statement, statementSchema);</span></span></code></pre></div><ul><li><code>defineModelSchema</code> is the single source of truth for fields/indexing/defaults.</li><li><code>InferAttrs&lt;typeof statementSchema&gt;</code> produces constructor/instance typings automatically.</li><li><code>attachAndRegisterModel</code> sets <code>modelName</code>, wires property accessors, and registers the class with <code>ModelRegistry</code>.</li><li>Property access uses native getters/setters installed per schema fieldno proxies required.</li></ul><blockquote><p>Migrating legacy models? See <a href="./_media/model-migration-guide.html"><code>docs/model-migration-guide.md</code></a> and <a href="./_media/model-autogen-plan.html"><code>docs/model-autogen-plan.md</code></a> for step-by-step guidance.</p></blockquote><h3 id="codegen-workflow" tabindex="-1">Codegen Workflow <a class="header-anchor" href="#codegen-workflow" aria-label="Permalink to Codegen Workflow"></a></h3><p><code>js-bao-codegen</code> keeps model files consistent by owning two firecracker-marked sections in every file:</p><ul><li><strong> BEGIN/END AUTO HEADER </strong>  imports <code>InferAttrs</code>, emits the <code>export type Attrs</code>/<code>export interface </code> declarations, and adds lint pragmas.</li><li><strong> BEGIN/END AUTO FOOTER </strong>  imports <code>./generated/&lt;Model&gt;.relationships.d</code> and calls <code>attachAndRegisterModel</code>.</li></ul><p>Everything between those markers (schema + class body) remains developer-owned. To regenerate the header/footer blocks <em>and</em> the per-model relationship d.ts files:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># From the library workspace</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:cli</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # compiles the CLI once</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> codegen</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # or: npx js-bao-codegen --config js-bao.config.cjs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># From a consuming app (e.g., demos/test-app)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> codegen</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # points to ../../dist/codegen.cjs in this repo</span></span></code></pre></div><p>Projects typically wire codegen into <code>postinstall</code>/<code>build</code> scripts so that models stay in sync automatically (see <code>demos/test-app/package.json</code>).</p><h3 id="runtime-programmatic-models" tabindex="-1">Runtime / Programmatic Models <a class="header-anchor" href="#runtime-programmatic-models" aria-label="Permalink to Runtime / Programmatic Models"></a></h3><p>For dynamic scenarios (Scenario 16, plugin systems, etc.) you can define runtime models entirely in code:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BaseModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  defineModelSchema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attachSchemaToClass,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autoRegisterModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> runtimeItemSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineModelSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;runtime_items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, autoAssign: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    quantity: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RuntimeItem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> runtimeShape</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> attachSchemaToClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RuntimeItem, runtimeItemSchema);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">autoRegisterModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RuntimeItem, runtimeShape);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RuntimeItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Dynamic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, quantity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;doc-123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><p><code>attachSchemaToClass</code> + <code>autoRegisterModel</code> remain available when you need to control registration (e.g., multiple registries, conditionally skipping registration). For typical model files, stick with the single-call <code>attachAndRegisterModel</code>.</p><h2 id="setup-initialization" tabindex="-1">Setup &amp; Initialization <a class="header-anchor" href="#setup-initialization" aria-label="Permalink to Setup &amp; Initialization"></a></h2><h3 id="multi-document-approach" tabindex="-1">Multi-Document Approach <a class="header-anchor" href="#multi-document-approach" aria-label="Permalink to Multi-Document Approach"></a></h3><p>js-bao now uses a multi-document approach, providing better flexibility for complex applications that need to work with multiple Y.Doc instances.</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/store/doc.ts (or your Yjs setup file)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;yjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> doc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Doc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Example: src/store/StoreContext.tsx (for React)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React, { createContext, useContext, useEffect, useState } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { initJsBao, DatabaseConfig, DatabaseEngine } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { doc } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../store/doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Your Y.Doc instance</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// --- Import your defined models (after defining them as shown below) ---</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// import { Statement } from &#39;../models/Statement&#39;;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// import { Account } from &#39;../models/Account&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreContextType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DatabaseEngine</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  isReady</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Multi-document functions</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  connectDocument</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        docId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        yDoc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        permission</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;read&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;read-write&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  disconnectDocument</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">docId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  getConnectedDocuments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  isDocumentConnected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">docId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Helper for the main document</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  mainDocumentId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> StoreContext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StoreContextType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReactNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StoreContextType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    isReady: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    connectDocument: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    disconnectDocument: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    getConnectedDocuments: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    isDocumentConnected: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mainDocumentId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Default document ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setupJsBao</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1. Define Database Configuration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dbConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DatabaseConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sqljs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          options: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // --- SQL.js specific options ---</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // wasmURL: &#39;/sql-wasm.wasm&#39;,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // If not at default /sql-wasm.wasm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2. Initialize the ODM (no yDoc parameter in new API!)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          dbEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          disconnectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          getConnectedDocuments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          isDocumentConnected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // Default doc mapping APIs also available:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          addDocumentModelMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          removeDocumentModelMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          clearDocumentModelMappings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          setDefaultDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          clearDefaultDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          getDocumentModelMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          getDocumentIdForModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          getDefaultDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initJsBao</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          databaseConfig: dbConfig,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // models: [Statement, Account]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // Optional: if models are not auto-detected</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3. Connect your main document</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mainDocumentId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mainDocumentId, doc, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;read-write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          db: dbEngine,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          isReady: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          connectDocument,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          disconnectDocument,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          getConnectedDocuments,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          isDocumentConnected,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          mainDocumentId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Error initializing js-bao:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          db: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          isReady: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          error: error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          connectDocument: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          disconnectDocument: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          getConnectedDocuments: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          isDocumentConnected: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          mainDocumentId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setupJsBao</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (state.error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Error loading store: {state.error.message}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state.isReady </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state.db) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Loading js</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bao</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StoreContext.Provider value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreContextType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StoreContext.Provider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(StoreContext);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.db) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;useStore must be used within a StoreProvider, and js-bao must be initialized.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Helper hook for easier document operations</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useDocumentOperations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">mainDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> saveToMainDocument</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: mainDocumentId });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> upsertInMainDocument</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    ModelClass</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    constraintName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    lookupValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ModelClass.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">upsertByUnique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(constraintName, lookupValue, data, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      targetDocument: mainDocumentId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    saveToMainDocument,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    upsertInMainDocument,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mainDocumentId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="defining-models" tabindex="-1">Defining Models <a class="header-anchor" href="#defining-models" aria-label="Permalink to Defining Models"></a></h2><p>Create a schema + class pair for each model (usually in <code>src/models</code>). The schema is the single source of truth; the class adds business logic.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/models/Product.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { BaseModel, defineModelSchema, attachAndRegisterModel } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { InferAttrs } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> productSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineModelSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;products&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, autoAssign: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sku: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, default: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    price: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, default: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    category: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, default: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    inStock: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;boolean&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, default: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductAttrs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InferAttrs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> productSchema&gt;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductAttrs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Partial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">??</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.sku) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.sku </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> crypto.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">randomUUID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isPremium</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findBySku</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sku</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryOne</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ sku });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attachAndRegisterModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Product, productSchema);</span></span></code></pre></div><p><strong>Constructor notes:</strong></p><ul><li><code>defineModelSchema</code> handles defaults, indexing, and inference. Only add constructor logic for custom behaviors (e.g., generating a SKU) before or after calling <code>super()</code>.</li><li><code>attachAndRegisterModel</code> mutates the class by setting <code>modelName</code>, wiring field accessors, and registering it with <code>ModelRegistry</code>no proxies required.</li></ul><h2 id="using-models" tabindex="-1">Using Models <a class="header-anchor" href="#using-models" aria-label="Permalink to Using Models"></a></h2><p>Once initialized, you can interact with your models using the modern document-style API. <strong>Note</strong>: With the multi-document API, saving new records requires specifying a <code>targetDocument</code>.</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Product } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./models/Product&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useDocumentOperations } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./store/StoreContext&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// If using React</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Wait for js-bao initialization if not using a context/provider</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Create a new product</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> newProduct</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Laptop Pro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1200.99</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // NEW API: Must specify targetDocument for new records</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newProduct.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Saved Product:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, newProduct.id);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Find a product by ID</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> foundProduct</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newProduct.id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (foundProduct) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Found Product:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, foundProduct.name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Document-style queries with filters (searches across ALL connected documents)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> expensiveProducts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ price: { $gt: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Expensive Products:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, expensiveProducts.data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Query with projection (only return specific fields)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> productSummary</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { projection: { name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Product summaries:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, productSummary.data);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Restrict queries to one or more documents</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mainDocProducts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { documents: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Products in main document:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mainDocProducts.data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> activeDocCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { documents: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;archive-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Products in main/archived documents:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, activeDocCount);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Pagination with cursor-based navigation</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> firstPage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, { limit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sort: { price: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;First page:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, firstPage.data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Has more:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, firstPage.hasMore);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (firstPage.nextCursor) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> secondPage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        limit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        sort: { price: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        uniqueStartKey: firstPage.nextCursor,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Second page:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, secondPage.data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Count documents</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> totalProducts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Total electronics:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, totalProducts);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Find single document</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cheapestLaptop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryOne</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, name: { $containsText: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Laptop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { sort: { price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Update a product (existing records don&#39;t need targetDocument unless moving to different doc)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (foundProduct) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    foundProduct.price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1150.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    foundProduct.inStock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> foundProduct.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// No targetDocument needed for existing records</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;Updated Product Price:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newProduct.id))?.price</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Upsert operation with new API</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> upsertedProduct</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">upsertByUnique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;Laptop Pro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Required for new records</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Subscribe to changes for all Products</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> unsubscribe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Product data changed!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">allProducts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Current products count:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, allProducts.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Call unsubscribe() when done listening</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Delete a product</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // await foundProduct?.delete();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>Pass a <code>documents</code> option (string or array of IDs) to scope <code>query</code>, <code>queryOne</code>, and <code>count</code> calls to specific connected documents when you do not want the default cross-document behaviour.</p><h2 id="date-fields" tabindex="-1">Date Fields <a class="header-anchor" href="#date-fields" aria-label="Permalink to Date Fields"></a></h2><p>js-bao supports a <code>date</code> field type. Because Yjs serializes nested data with <code>JSON.stringify</code>, date values end up stored as ISO-8601 strings inside the models backing <code>Y.Map</code>. Reading the field returns that stringwrap it with <code>new Date(...)</code> if you need native date helpers. Query filters accept either <code>Date</code> instances or any string that <code>Date.parse</code> can understand.</p><h3 id="defining-and-saving-date-fields" tabindex="-1">Defining and saving date fields <a class="header-anchor" href="#defining-and-saving-date-fields" aria-label="Permalink to Defining and saving date fields"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { BaseModel, defineModelSchema, attachAndRegisterModel } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> postSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineModelSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;posts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, autoAssign: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    publishedAt: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Post</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> publishedAtDate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.publishedAt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.publishedAt) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  set</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> publishedAtDate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.publishedAt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toISOString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attachAndRegisterModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Post, postSchema);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> post</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Working with js-bao dates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  publishedAt: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toISOString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> post.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Saved post:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, post.id);</span></span></code></pre></div><h3 id="loading-and-querying-by-dates" tabindex="-1">Loading and querying by dates <a class="header-anchor" href="#loading-and-querying-by-dates" aria-label="Permalink to Loading and querying by dates"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> loaded</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Post.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(post.id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (loaded?.publishedAt) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loaded.publishedAt);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Published at:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, published.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLocaleString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Queries accept Date objects or ISO strings</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> recentPosts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Post.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  publishedAt: { $gte: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-01&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Sorting by date uses the stored ISO strings</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ordered</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Post.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, { sort: { publishedAt: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span></code></pre></div><h3 id="working-with-multiple-documents" tabindex="-1">Working with Multiple Documents <a class="header-anchor" href="#working-with-multiple-documents" aria-label="Permalink to Working with Multiple Documents"></a></h3><p>The new multi-document API shines when you need to work with multiple documents:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useMultiDocumentOperations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">disconnectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isDocumentConnected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    useStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleConnectUserDocument</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userDoc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Doc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> docId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isDocumentConnected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(docId)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(docId, userDoc, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;read-write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Connected document for user ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleSaveToUserDocument</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> docId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isDocumentConnected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(docId)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: docId });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Document for user ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} is not connected`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleDisconnectUserDocument</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> docId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> disconnectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(docId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Disconnected document for user ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handleConnectUserDocument,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handleSaveToUserDocument,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handleDisconnectUserDocument,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="migration-from-single-document-api" tabindex="-1">Migration from Single-Document API <a class="header-anchor" href="#migration-from-single-document-api" aria-label="Permalink to Migration from Single-Document API"></a></h2><p>If you&#39;re upgrading from an earlier version of js-bao that used the single-document approach, here are the key changes:</p><h3 id="old-api-vs-new-api" tabindex="-1">Old API vs New API <a class="header-anchor" href="#old-api-vs-new-api" aria-label="Permalink to Old API vs New API"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  Old single-document approach</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dbEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initJsBao</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  yDoc: doc, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Single document passed directly</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databaseConfig: dbConfig,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  models: [Statement, Account],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  New multi-document approach</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  dbEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  disconnectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  getConnectedDocuments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  isDocumentConnected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // New client-level defaults API</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  addDocumentModelMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  removeDocumentModelMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  clearDocumentModelMappings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  setDefaultDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  clearDefaultDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  getDocumentModelMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  getDocumentIdForModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  getDefaultDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initJsBao</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databaseConfig: dbConfig, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// No yDoc parameter!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  models: [Statement, Account],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Connect documents explicitly</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, doc, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;read-write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="model-operations-changes" tabindex="-1">Model Operations Changes <a class="header-anchor" href="#model-operations-changes" aria-label="Permalink to Model Operations Changes"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  Old way - automatic document targeting</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Item&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Automatically saved to the single document</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  New way - explicit document targeting for new records (or use defaults mapping)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Item&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Option A: supply explicit target</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Option B: rely on defaults (see below)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  Old way - upsert without document specification</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> account</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">upsertByUnique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John Doe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  New way - upsert requires targetDocument for new records</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> account</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">upsertByUnique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;user@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John Doe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="default-document-id-mapping" tabindex="-1">Default Document ID Mapping <a class="header-anchor" href="#default-document-id-mapping" aria-label="Permalink to Default Document ID Mapping"></a></h3><p>You can set default document ids so new instances can <code>save()</code> without specifying a <code>targetDocument</code>:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  addDocumentModelMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  setDefaultDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  onDefaultDocChanged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  onModelDocMappingChanged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initJsBao</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ databaseConfig: dbConfig, models: [Product] });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, doc, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;read-write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;archive-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Doc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;read-write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Global default (used when no model-specific mapping exists)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDefaultDocumentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Model-specific default overrides global</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addDocumentModelMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;products&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;archive-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Events</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> off1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onDefaultDocChanged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">previous</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Default doc changed:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, previous, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, current);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> off2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onModelDocMappingChanged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">modelName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">previous</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Mapping for ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">modelName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, previous, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, current);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mapped Save&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Saves to &quot;archive-doc&quot; via model mapping</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">off1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">off2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>Precedence (highest to lowest):</p><ul><li>Explicit <code>save({ targetDocument })</code></li><li>Instance remembered document (when loaded from a doc)</li><li>Model-specific default document mapping</li><li>Global default document id</li></ul><p>Closed document behavior:</p><ul><li>If the resolved <code>docId</code> is closed, <code>save()</code> throws <code>ERR_DOC_CLOSED</code> and will not fall back.</li><li>If nothing resolves, <code>save()</code> throws <code>ERR_DOC_UNRESOLVED</code>.</li></ul><p>Mappings/defaults are cleared on <code>disconnectDocument(docId)</code> and are not automatically restored upon reconnect.</p><h3 id="benefits-of-the-new-multi-document-api" tabindex="-1">Benefits of the New Multi-Document API <a class="header-anchor" href="#benefits-of-the-new-multi-document-api" aria-label="Permalink to Benefits of the New Multi-Document API"></a></h3><ol><li><strong>Multiple Data Contexts</strong>: Work with separate documents for different users, projects, or data sets</li><li><strong>Dynamic Document Management</strong>: Connect and disconnect documents as needed</li><li><strong>Permission Control</strong>: Specify read-only or read-write access per document</li><li><strong>Better Scalability</strong>: Handle complex collaborative scenarios with isolated data</li><li><strong>Backward Compatible Queries</strong>: Queries automatically search across all connected documents</li></ol><p>For a complete migration guide, see <code>MIGRATION_GUIDE_SINGLE_TO_MULTIDOC.md</code> in the project repository.</p><h2 id="query-api" tabindex="-1">Query API <a class="header-anchor" href="#query-api" aria-label="Permalink to Query API"></a></h2><p>js-bao provides a modern, MongoDB-inspired query API for filtering, sorting, and paginating your data.</p><h3 id="basic-queries" tabindex="-1">Basic Queries <a class="header-anchor" href="#basic-queries" aria-label="Permalink to Basic Queries"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Find all products</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> allProducts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Filter by exact match</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> electronicProducts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Filter with operators</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> expensiveProducts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  price: { $gt: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inStock: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Complex queries with multiple conditions</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  $and: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { price: { $gte: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $lte: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { category: { $in: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Books&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] } },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="supported-query-operators" tabindex="-1">Supported Query Operators <a class="header-anchor" href="#supported-query-operators" aria-label="Permalink to Supported Query Operators"></a></h3><ul><li><strong>Comparison</strong>: <code>$eq</code>, <code>$ne</code>, <code>$gt</code>, <code>$gte</code>, <code>$lt</code>, <code>$lte</code></li><li><strong>Array/Set</strong>: <code>$in</code>, <code>$nin</code></li><li><strong>Logical</strong>: <code>$and</code>, <code>$or</code>, <code>$not</code></li><li><strong>Text</strong>: <code>$startsWith</code>, <code>$endsWith</code>, <code>$containsText</code> (case-insensitive by default)</li><li><strong>Existence</strong>: <code>$exists</code></li></ul><h3 id="sorting-and-pagination" tabindex="-1">Sorting and Pagination <a class="header-anchor" href="#sorting-and-pagination" aria-label="Permalink to Sorting and Pagination"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Sort by price (descending)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sortedProducts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, { sort: { price: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Paginated results with cursor-based navigation</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> firstPage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    limit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sort: { createdAt: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Results:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, firstPage.data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Has more:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, firstPage.hasMore);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Next cursor:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, firstPage.nextCursor);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get next page</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (firstPage.nextCursor) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nextPage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      limit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sort: { createdAt: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      uniqueStartKey: firstPage.nextCursor,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Navigate backwards</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (nextPage.prevCursor) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prevPage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      limit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sort: { createdAt: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      uniqueStartKey: nextPage.prevCursor,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      direction: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Go backwards</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="projections" tabindex="-1">Projections <a class="header-anchor" href="#projections" aria-label="Permalink to Projections"></a></h3><p>Control which fields are returned to optimize performance:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Only return name and price fields</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> productSummary</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { inStock: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    projection: { name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Returns: [{ id: &quot;...&quot;, name: &quot;...&quot;, price: ... }, ...]</span></span></code></pre></div><h3 id="single-document-queries" tabindex="-1">Single Document Queries <a class="header-anchor" href="#single-document-queries" aria-label="Permalink to Single Document Queries"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Find one document matching criteria</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> featuredProduct</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryOne</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  featured: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inStock: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Count documents</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> electronicsCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="aggregation-api" tabindex="-1">Aggregation API <a class="header-anchor" href="#aggregation-api" aria-label="Permalink to Aggregation API"></a></h2><p>Perform complex data analysis with grouping, statistical operations, and faceting.</p><h3 id="basic-aggregation" tabindex="-1">Basic Aggregation <a class="header-anchor" href="#basic-aggregation" aria-label="Permalink to Basic Aggregation"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Count products by category</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> categoryCounts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aggregate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  groupBy: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;category&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  operations: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Result: { &quot;Electronics&quot;: 25, &quot;Books&quot;: 18, &quot;Clothing&quot;: 12 }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Multiple statistical operations</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> categoryStats</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aggregate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  groupBy: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;category&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  operations: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;avg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, field: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, field: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;min&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, field: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;max&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, field: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Result: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   &quot;Electronics&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     count: 25,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     avg_price: 299.99,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     sum_price: 7499.75,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     min_price: 29.99,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     max_price: 1299.99</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span></code></pre></div><h3 id="multi-dimensional-grouping" tabindex="-1">Multi-Dimensional Grouping <a class="header-anchor" href="#multi-dimensional-grouping" aria-label="Permalink to Multi-Dimensional Grouping"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Group by multiple fields</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> salesData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Product.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aggregate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  groupBy: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;category&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  operations: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, field: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;revenue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Result: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   &quot;Electronics&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     &quot;Apple&quot;: { count: 12, sum_revenue: 15000 },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     &quot;Samsung&quot;: { count: 8, sum_revenue: 9500 }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   &quot;Books&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     &quot;Penguin&quot;: { count: 25, sum_revenue: 450 }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span></code></pre></div><h3 id="stringset-aggregation" tabindex="-1">StringSet Aggregation <a class="header-anchor" href="#stringset-aggregation" aria-label="Permalink to StringSet Aggregation"></a></h3><p>For StringSet fields (like tags), js-bao provides special aggregation capabilities:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BaseModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  defineModelSchema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attachAndRegisterModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  StringSet,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> articleSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineModelSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;articles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, autoAssign: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tags: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stringset&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Article</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attachAndRegisterModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Article, articleSchema);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Tag facet counts (how many articles have each tag)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tagCounts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Article.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aggregate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  groupBy: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// StringSet faceting</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  operations: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Result: { &quot;javascript&quot;: 45, &quot;react&quot;: 32, &quot;tutorial&quot;: 28 }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Membership-based grouping (articles that have specific tag vs don&#39;t)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> urgentCounts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Article.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aggregate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  groupBy: [{ field: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, contains: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;urgent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  operations: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Result: { &quot;true&quot;: 5, &quot;false&quot;: 120 }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Complex aggregation with filtering and sorting</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> topTags</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Article.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aggregate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  groupBy: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  operations: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  filter: { publishedAt: { $gte: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-01&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  sort: { field: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, direction: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  limit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="aggregation-options" tabindex="-1">Aggregation Options <a class="header-anchor" href="#aggregation-options" aria-label="Permalink to Aggregation Options"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AggregationOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  groupBy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">field</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">contains</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })[];</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  operations</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;count&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sum&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;avg&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;min&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;max&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    field</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Required for sum, avg, min, max</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }[];</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  filter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DocumentFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Filter documents before aggregation</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  limit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Limit number of groups returned</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  sort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Sort aggregation results</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    field</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Field name or operation result</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    direction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1 for ascending, -1 for descending</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="stringset-fields" tabindex="-1">StringSet Fields <a class="header-anchor" href="#stringset-fields" aria-label="Permalink to StringSet Fields"></a></h2><p>StringSet is a special field type optimized for tag-like data, providing efficient membership queries and faceting capabilities.</p><h3 id="defining-stringset-fields" tabindex="-1">Defining StringSet Fields <a class="header-anchor" href="#defining-stringset-fields" aria-label="Permalink to Defining StringSet Fields"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BaseModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  StringSet,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  defineModelSchema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attachAndRegisterModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> articleSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineModelSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;articles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, autoAssign: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tags: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stringset&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      maxCount: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      maxLength: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Article</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attachAndRegisterModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Article, articleSchema);</span></span></code></pre></div><h3 id="working-with-stringsets" tabindex="-1">Working with StringSets <a class="header-anchor" href="#working-with-stringsets" aria-label="Permalink to Working with StringSets"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> article</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Article</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Getting Started with js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Add tags</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">article.tags.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">article.tags.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tutorial&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">article.tags.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Check membership</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (article.tags.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tutorial&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This is a tutorial&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Remove tags</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">article.tags.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;draft&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Clear all tags</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">article.tags.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Iterate over tags</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> article.tags) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tag);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Article has ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">article</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tags</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} tags`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Convert to array</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tagArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> article.tags.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> article.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-document&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><h3 id="querying-stringsets" tabindex="-1">Querying StringSets <a class="header-anchor" href="#querying-stringsets" aria-label="Permalink to Querying StringSets"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Find articles with specific tag</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tutorials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Article.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tags: { $contains: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tutorial&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Find articles with any of multiple tags</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> techArticles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Article.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tags: { $containsAny: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Find articles with all specified tags</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> advancedTutorials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Article.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tags: { $containsAll: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tutorial&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;advanced&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Count by tag membership</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tagStats</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Article.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aggregate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  groupBy: [{ field: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, contains: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tutorial&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  operations: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Result: { &quot;true&quot;: 25, &quot;false&quot;: 75 }</span></span></code></pre></div><h2 id="database-engine-specifics" tabindex="-1">Database Engine Specifics <a class="header-anchor" href="#database-engine-specifics" aria-label="Permalink to Database Engine Specifics"></a></h2><h3 id="sql-js-type-sqljs" tabindex="-1">SQL.js (<code>type: &#39;sqljs&#39;</code>) <a class="header-anchor" href="#sql-js-type-sqljs" aria-label="Permalink to SQL.js (type: &#39;sqljs&#39;)"></a></h3><ul><li><strong>WASM File</strong>: <code>sql-wasm.wasm</code> (from the <code>sql.js</code> package) must be publicly accessible in your application. <ul><li>By default, the library expects it at <code>/sql-wasm.wasm</code> (root of your public server path).</li><li><strong>Vite/Create React App</strong>: Place <code>sql-wasm.wasm</code> in your project&#39;s <code>public</code> directory.</li><li><strong>Custom Path</strong>: If the WASM file is located elsewhere, configure it in <code>DatabaseConfig</code>:<div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dbConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DatabaseConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sqljs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    wasmURL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/your/sql-wasm.wasm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // or use locateFile for more complex scenarios:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // locateFile: (file) =&gt; `/assets/wasm/${file}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></li></ul></li></ul><h2 id="building-the-library-for-contributors" tabindex="-1">Building the Library (for Contributors) <a class="header-anchor" href="#building-the-library-for-contributors" aria-label="Permalink to Building the Library (for Contributors)"></a></h2><ol><li>Clone the repository.</li><li>Install dependencies: <code>npm install</code></li><li>Build: <code>npm run build</code> (uses <code>tsup</code>) <ul><li>Development watch mode: <code>npm run dev</code></li></ul></li></ol><h2 id="license" tabindex="-1">License <a class="header-anchor" href="#license" aria-label="Permalink to License"></a></h2><p>This library is licensed under the ISC License. (Assuming ISC from your package.json, you might want to add a LICENSE file).</p><h2 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to Quick Start"></a></h2><h3 id="browser-usage" tabindex="-1">Browser Usage <a class="header-anchor" href="#browser-usage" aria-label="Permalink to Browser Usage"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  initJsBao,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BaseModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  defineModelSchema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attachAndRegisterModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;yjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> userSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineModelSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, autoAssign: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    email: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attachAndRegisterModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User, userSchema);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> doc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Doc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dbEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initJsBao</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databaseConfig: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sqljs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options: {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  models: [User],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Connect the document</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, doc, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;read-write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Create and save a user</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John Doe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, email: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;john@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Query users</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> User.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: { $containsText: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Found users:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, users.data);</span></span></code></pre></div><h3 id="node-js-usage" tabindex="-1">Node.js Usage <a class="header-anchor" href="#node-js-usage" aria-label="Permalink to Node.js Usage"></a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  initJsBao,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BaseModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  defineModelSchema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attachAndRegisterModel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  getRecommendedNodeEngine,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao/node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;yjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> userSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineModelSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, autoAssign: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, indexed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    email: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attachAndRegisterModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User, userSchema);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> doc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Doc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> engineType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getRecommendedNodeEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initJsBao</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databaseConfig: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: engineType,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options: { filePath: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;:memory:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  models: [User],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> connectDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, doc, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;read-write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John Doe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, email: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;john@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ targetDocument: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><h2 id="database-configuration" tabindex="-1">Database Configuration <a class="header-anchor" href="#database-configuration" aria-label="Permalink to Database Configuration"></a></h2><h3 id="sqlite-node-js" tabindex="-1">SQLite (Node.js) <a class="header-anchor" href="#sqlite-node-js" aria-label="Permalink to SQLite (Node.js)"></a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node-sqlite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    filePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:memory:&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // or &#39;/path/to/database.db&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="sql-js-browser-node-js" tabindex="-1">SQL.js (Browser/Node.js) <a class="header-anchor" href="#sql-js-browser-node-js" aria-label="Permalink to SQL.js (Browser/Node.js)"></a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sqljs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Browser: automatically loads WASM</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Node.js: fallback option</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="engine-detection" tabindex="-1">Engine Detection <a class="header-anchor" href="#engine-detection" aria-label="Permalink to Engine Detection"></a></h2><p>Check available engines in your environment:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { DatabaseFactory } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;js-bao/node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// or &#39;js-bao&#39; for browser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> engines</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DatabaseFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAvailableEngines</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">engines.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">engine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">engine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">engine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">available</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">engine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reason</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="debug-inspector" tabindex="-1">Debug Inspector <a class="header-anchor" href="#debug-inspector" aria-label="Permalink to Debug Inspector"></a></h2><p>Run the bundled Y.Doc debugger to inspect saved updates or dump JSONs:</p><ol><li>From the repo root, serve static files so <code>dist/</code> is reachable (e.g., <code>python -m http.server 8000</code> or <code>npx serve demos/debug-inspector</code>).</li><li>Open <code>http://localhost:8000/demos/debug-inspector/</code> (or the <code>index.html</code> in that folder) in your browser.</li><li>Load your model module and Y.Doc update/dump, then click <strong>Reset &amp; Connect</strong> to reindex and start querying.</li></ol><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to Examples"></a></h2><p>See the <code>examples/</code> directory for complete working examples:</p><ul><li><code>examples/simple-node-test.mjs</code> - Basic Node.js usage without models</li><li><code>examples/node-example.mjs</code> - Complete Node.js example with models</li></ul></div></div></main><footer class="VPDocFooter" data-v-f13de798 data-v-d2200dbb><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-d2200dbb><span class="visually-hidden" id="doc-footer-aria-label" data-v-d2200dbb>Pager</span><div class="pager" data-v-d2200dbb><!----></div><div class="pager" data-v-d2200dbb><a class="VPLink link pager-link next" href="/primitive-docs/getting-started/page-1.html" data-v-d2200dbb><!--[--><span class="desc" data-v-d2200dbb>Next page</span><span class="title" data-v-d2200dbb>Page 1</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"SgZ_k4fn\",\"getting-started_page-1.md\":\"BOHEJWZg\",\"getting-started_page-2.md\":\"2d4rktsq\",\"guide_getting-started.md\":\"DV_JPq3P\",\"guide_index.md\":\"CkrNIPH9\",\"index.md\":\"juLpQBEu\",\"markdown-examples.md\":\"DJQnVTz0\",\"reference_index.md\":\"B59HKR0q\",\"reference_js-bao-wss-client_api__media_local_testing.md\":\"DGmQI_YG\",\"reference_js-bao-wss-client_api_classes_jsbaoclient.md\":\"D0hSsPTw\",\"reference_js-bao-wss-client_api_classes_jsbaoerror.md\":\"BFGl4KGV\",\"reference_js-bao-wss-client_api_functions_initializeclient.md\":\"DoFI5Rph\",\"reference_js-bao-wss-client_api_functions_isjsbaoerror.md\":\"CY4SCbop\",\"reference_js-bao-wss-client_api_globals.md\":\"DR-rF2VF\",\"reference_js-bao-wss-client_api_interfaces_analyticsautoeventsoptions.md\":\"CNsAgNA_\",\"reference_js-bao-wss-client_api_interfaces_analyticsclient.md\":\"BYjoZ2c9\",\"reference_js-bao-wss-client_api_interfaces_analyticseventinput.md\":\"CZ2ntkYT\",\"reference_js-bao-wss-client_api_interfaces_authstateevent.md\":\"BXPArKjL\",\"reference_js-bao-wss-client_api_interfaces_basicuserinfo.md\":\"D811haSZ\",\"reference_js-bao-wss-client_api_interfaces_blobuploadcompletedevent.md\":\"CWRK947i\",\"reference_js-bao-wss-client_api_interfaces_blobuploadfailedevent.md\":\"t_nfKc4F\",\"reference_js-bao-wss-client_api_interfaces_blobuploadprogressevent.md\":\"BJG36DSs\",\"reference_js-bao-wss-client_api_interfaces_cachefacade.md\":\"DT1n3Kek\",\"reference_js-bao-wss-client_api_interfaces_documentaccessresult.md\":\"DA9vCRnA\",\"reference_js-bao-wss-client_api_interfaces_documentcreatecommitfailedevent.md\":\"aP2EFxs-\",\"reference_js-bao-wss-client_api_interfaces_documentevent.md\":\"Ct9nniD3\",\"reference_js-bao-wss-client_api_interfaces_documentinfo.md\":\"GHfcroA2\",\"reference_js-bao-wss-client_api_interfaces_documentinvitation.md\":\"BXFGDkPF\",\"reference_js-bao-wss-client_api_interfaces_documentinvitationresponse.md\":\"0jXnIFKh\",\"reference_js-bao-wss-client_api_interfaces_documentmetadatachangedevent.md\":\"DLMFHcpz\",\"reference_js-bao-wss-client_api_interfaces_documentpermissionentry.md\":\"DCVN5hQb\",\"reference_js-bao-wss-client_api_interfaces_geminigeneraterawoptions.md\":\"DcJmDjIn\",\"reference_js-bao-wss-client_api_interfaces_geminigenerateresult.md\":\"ClduLlj2\",\"reference_js-bao-wss-client_api_interfaces_geminimessage.md\":\"dlgVxFQw\",\"reference_js-bao-wss-client_api_interfaces_geminimodelsummary.md\":\"DTd6wOQz\",\"reference_js-bao-wss-client_api_interfaces_geminipromptoptions.md\":\"CheRfKyO\",\"reference_js-bao-wss-client_api_interfaces_geministructuredoutput.md\":\"a9ZgQMLl\",\"reference_js-bao-wss-client_api_interfaces_integrationcallrequest.md\":\"V8Q5fn9q\",\"reference_js-bao-wss-client_api_interfaces_integrationcallresponse.md\":\"mfvkHzZp\",\"reference_js-bao-wss-client_api_interfaces_integrationsapi.md\":\"9GzTp9SM\",\"reference_js-bao-wss-client_api_interfaces_invitationevent.md\":\"CQ7jcOKp\",\"reference_js-bao-wss-client_api_interfaces_jsbaoclientoptions.md\":\"B5jiSh9x\",\"reference_js-bao-wss-client_api_interfaces_jsbaoevents.md\":\"CTEcvTDl\",\"reference_js-bao-wss-client_api_interfaces_llmchatoptions.md\":\"CynZV1ys\",\"reference_js-bao-wss-client_api_interfaces_meupdatedevent.md\":\"YkzohiiY\",\"reference_js-bao-wss-client_api_interfaces_meupdatefailedevent.md\":\"CSyRaqNp\",\"reference_js-bao-wss-client_api_interfaces_networkmodeevent.md\":\"BIXlIEnw\",\"reference_js-bao-wss-client_api_interfaces_offlineauthenabledevent.md\":\"2uFENiOL\",\"reference_js-bao-wss-client_api_interfaces_offlineauthexpiringsoonevent.md\":\"CoINnUFR\",\"reference_js-bao-wss-client_api_interfaces_offlineauthfailedevent.md\":\"C7OWCUBX\",\"reference_js-bao-wss-client_api_interfaces_offlineauthrenewedevent.md\":\"C_JKp7J8\",\"reference_js-bao-wss-client_api_interfaces_offlineauthunlockedevent.md\":\"DebTeBwc\",\"reference_js-bao-wss-client_api_interfaces_pendingcreatecommittedevent.md\":\"COqt1UEB\",\"reference_js-bao-wss-client_api_interfaces_pendingcreatefailedevent.md\":\"C5JAWoGO\",\"reference_js-bao-wss-client_api_interfaces_permissionevent.md\":\"DsheyrQ7\",\"reference_js-bao-wss-client_api_interfaces_reasoningoptions.md\":\"C-q3_V1h\",\"reference_js-bao-wss-client_api_interfaces_sessioninfo.md\":\"DEF0Mbs0\",\"reference_js-bao-wss-client_api_interfaces_statuschangedevent.md\":\"Ch38giAk\",\"reference_js-bao-wss-client_api_interfaces_userprofile.md\":\"CvtyVxCI\",\"reference_js-bao-wss-client_api_readme.md\":\"ChRTWbJP\",\"reference_js-bao-wss-client_api_type-aliases_geminicontentpart.md\":\"B3A0mBhN\",\"reference_js-bao-wss-client_api_type-aliases_geminigenerateoptions.md\":\"291y8hpN\",\"reference_js-bao-wss-client_api_type-aliases_geminirole.md\":\"BGxIxe2b\",\"reference_js-bao-wss-client_api_type-aliases_jsbaoerrorcode.md\":\"BkEjPUE_\",\"reference_js-bao-wss-client_api_type-aliases_typedmodelconstructor.md\":\"BapSe7gt\",\"reference_js-bao-wss-client_api_variables_initjsbao.md\":\"BElJs0Jt\",\"reference_js-bao_api__media_model-autogen-plan.md\":\"DfdJCNXG\",\"reference_js-bao_api__media_model-migration-guide.md\":\"B0alswSY\",\"reference_js-bao_api_classes_basemodel.md\":\"By-6vDSb\",\"reference_js-bao_api_classes_databaseengine.md\":\"DZmwNBjW\",\"reference_js-bao_api_classes_documentclosederror.md\":\"ce8Dlw3L\",\"reference_js-bao_api_classes_documentresolutionerror.md\":\"C1yY2MvB\",\"reference_js-bao_api_classes_logger.md\":\"BH7ncJIo\",\"reference_js-bao_api_classes_modelregistry.md\":\"BUjRsen2\",\"reference_js-bao_api_classes_recordnotfounderror.md\":\"BSbYxNAn\",\"reference_js-bao_api_classes_stringset.md\":\"DwOzcDan\",\"reference_js-bao_api_classes_uniqueconstraintviolationerror.md\":\"BWvnk2xI\",\"reference_js-bao_api_enumerations_loglevel.md\":\"DY2lgutc\",\"reference_js-bao_api_functions_attachandregistermodel.md\":\"B_jNS89u\",\"reference_js-bao_api_functions_attachschematoclass.md\":\"BbPgv1vS\",\"reference_js-bao_api_functions_autoregistermodel.md\":\"OM6BPw2G\",\"reference_js-bao_api_functions_createmodelclass.md\":\"0axDu-0f\",\"reference_js-bao_api_functions_definemodelschema.md\":\"C3cxyUOI\",\"reference_js-bao_api_functions_dumpydoctoplain.md\":\"BCgeC1cl\",\"reference_js-bao_api_functions_field.md\":\"DrzEAwll\",\"reference_js-bao_api_functions_generateulid.md\":\"DL2fKE_D\",\"reference_js-bao_api_functions_initjsbao.md\":\"BDdO2wS1\",\"reference_js-bao_api_functions_model.md\":\"y_kl_cO8\",\"reference_js-bao_api_functions_resetjsbao.md\":\"D8VfImOI\",\"reference_js-bao_api_functions_summarizeplainydoc.md\":\"6jhclyY-\",\"reference_js-bao_api_globals.md\":\"BSTfQv8u\",\"reference_js-bao_api_interfaces_connecteddocument.md\":\"BJK-7otl\",\"reference_js-bao_api_interfaces_databaseconfig.md\":\"CkW7ezy6\",\"reference_js-bao_api_interfaces_documentconnectionevent.md\":\"D7UhUuCN\",\"reference_js-bao_api_interfaces_documentmanager.md\":\"BA7os4j3\",\"reference_js-bao_api_interfaces_dumpoptions.md\":\"DduHJ437\",\"reference_js-bao_api_interfaces_dumpsummary.md\":\"YViE6MrF\",\"reference_js-bao_api_interfaces_dumpsummaryentry.md\":\"B5xwOHoD\",\"reference_js-bao_api_interfaces_fieldoptions.md\":\"DzcrxL6_\",\"reference_js-bao_api_interfaces_initjsbaooptions.md\":\"BIj-7zPz\",\"reference_js-bao_api_interfaces_initjsbaoresult.md\":\"9SXDxzwj\",\"reference_js-bao_api_interfaces_modeloptions.md\":\"BUsTFjhB\",\"reference_js-bao_api_interfaces_paginatedresult.md\":\"FrIQs2d5\",\"reference_js-bao_api_interfaces_paginationoptions.md\":\"iGji9EAM\",\"reference_js-bao_api_interfaces_queryoptions.md\":\"BuRYFjXZ\",\"reference_js-bao_api_interfaces_saveoptions.md\":\"BNF7BL8A\",\"reference_js-bao_api_readme.md\":\"BgbSb-Rd\",\"reference_js-bao_api_type-aliases_documentconnectioncallback.md\":\"D2SSr3uJ\",\"reference_js-bao_api_type-aliases_documentfilter.md\":\"B8Hk8_Gg\",\"reference_js-bao_api_type-aliases_documentpermissionhint.md\":\"CJ9pX5sv\",\"reference_js-bao_api_type-aliases_inferattrs.md\":\"ZhYLZSnJ\",\"reference_js-bao_api_type-aliases_modelconstructor.md\":\"BfsqeY9E\",\"reference_js-bao_api_type-aliases_plainydoc.md\":\"B_MoPlIK\",\"reference_js-bao_api_type-aliases_projectionspec.md\":\"Bz5pKPiS\",\"reference_js-bao_api_type-aliases_queryresult.md\":\"CTc6XZNz\",\"reference_primitive-app_components_components_auth_primitivelogin.md\":\"DJKNCrj3\",\"reference_primitive-app_components_components_auth_primitivelogout.md\":\"CQ6eS4qP\",\"reference_primitive-app_components_components_auth_primitiveoauthcallback.md\":\"BcQ4aXC1\",\"reference_primitive-app_components_components_documents_primitivemanagedocuments.md\":\"CBUsysRG\",\"reference_primitive-app_components_components_documents_primitivesharedocumentdialog.md\":\"CnlEF_hL\",\"reference_primitive-app_components_components_documents_primitivesingledocumentswitcher.md\":\"DiIDBXwX\",\"reference_primitive-app_components_components_navigation_primitiveappbreadcrumb.md\":\"CtSggoOA\",\"reference_primitive-app_components_components_navigation_primitiveappsidebarheader.md\":\"CJbScXPK\",\"reference_primitive-app_components_components_navigation_primitivebottomnav.md\":\"HgfGSAbd\",\"reference_primitive-app_components_components_navigation_primitivenavigationbadge.md\":\"8eKsGKO-\",\"reference_primitive-app_components_components_navigation_primitivesidebarnav.md\":\"BUV8PgxK\",\"reference_primitive-app_components_components_navigation_primitiveusermenu.md\":\"BIoPEFns\",\"reference_primitive-app_components_components_shared_deleteconfirmationdialog.md\":\"BvOzIT18\",\"reference_primitive-app_components_components_shared_primitivelogospinner.md\":\"7bZQ7RC2\",\"reference_primitive-app_components_components_shared_primitiveskeletongate.md\":\"nN1U-jaY\",\"reference_primitive-app_components_layouts_primitiveapplayout.md\":\"BbQOr8A2\",\"reference_primitive-app_components_layouts_primitiveloginlayout.md\":\"Dk9WUG5g\",\"reference_primitive-app_components_layouts_primitivestaticlayout.md\":\"Do3hO_yu\",\"reference_primitive-app_components_pages_primitivenotfound.md\":\"D3Zq772V\",\"reference_primitive-app_components_primitivenotfound.md\":\"CxbGHin1\",\"reference_primitive-app_composables_usejsbaodataloader.md\":\"hvH3yANQ\",\"reference_primitive-app_composables_usetheme.md\":\"BiPtlAn2\",\"reference_primitive-app_config_app-config.md\":\"DOuNxk8B\",\"reference_primitive-app_config_env-config.md\":\"BUYDpzeT\",\"reference_primitive-app_config_index.md\":\"BMXYIbB9\",\"reference_primitive-app_config_navigation-config.md\":\"DoyYaPqj\",\"reference_primitive-app_createprimitiveapp.md\":\"EeIoaxes\",\"reference_primitive-app_types_app.md\":\"B1QCfMEK\",\"reference_primitive-app_types_js-bao-stub.d.md\":\"pakEqu84\",\"reference_primitive-app_types_navigation.md\":\"BxH8csKR\",\"reference_primitive-app_types_router.md\":\"D4YjcnBT\",\"reference_primitive-app_types_symbols_badgeconfig.md\":\"BPMX8rjF\",\"reference_primitive-app_types_symbols_badgevariant.md\":\"xkLo8Q35\",\"reference_primitive-app_types_symbols_bottomnavitem.md\":\"uYYEvyJP\",\"reference_primitive-app_types_symbols_breadcrumbsegment.md\":\"BEaE8TFL\",\"reference_primitive-app_types_symbols_definedmodelschema.md\":\"CXIQryLS\",\"reference_primitive-app_types_symbols_documentstoremode.md\":\"CgCR1fcb\",\"reference_primitive-app_types_symbols_index.md\":\"DKsYXxNN\",\"reference_primitive-app_types_symbols_inferattrs.md\":\"BJVV3lym\",\"reference_primitive-app_types_symbols_navigationconfig.md\":\"Cx-5qk5H\",\"reference_primitive-app_types_symbols_navigationitemsconfig.md\":\"DJ7yXWly\",\"reference_primitive-app_types_symbols_navigationoptions.md\":\"B0F7IUvs\",\"reference_primitive-app_types_symbols_navigationoverflowmode.md\":\"Dla8O88n\",\"reference_primitive-app_types_symbols_navitemconfig.md\":\"BeXegmK7\",\"reference_primitive-app_types_symbols_navitemimpl.md\":\"BNE0LLG0\",\"reference_primitive-app_types_symbols_registeredmodelinfo.md\":\"2f1Ice_-\",\"reference_primitive-app_utils_logger.md\":\"BFezxNxW\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Primitive Docs\",\"description\":\"Unified documentation for Primitive Labs libraries and apps.\",\"base\":\"/primitive-docs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Docs\",\"link\":\"/\"}],\"sidebar\":[{\"text\":\"Getting Started\",\"items\":[{\"text\":\"Page 1\",\"link\":\"/getting-started/page-1\"},{\"text\":\"Page 2\",\"link\":\"/getting-started/page-2\"}],\"collapsible\":true,\"collapsed\":false},{\"text\":\"Reference\",\"items\":[{\"text\":\"primitive-app\",\"items\":[{\"text\":\"createPrimitiveApp\",\"link\":\"/reference/primitive-app/createPrimitiveApp\"},{\"text\":\"Components\",\"items\":[{\"text\":\"Auth\",\"items\":[{\"text\":\"PrimitiveLogin\",\"link\":\"/reference/primitive-app/components/components/auth/PrimitiveLogin\"},{\"text\":\"PrimitiveLogout\",\"link\":\"/reference/primitive-app/components/components/auth/PrimitiveLogout\"},{\"text\":\"PrimitiveOauthCallback\",\"link\":\"/reference/primitive-app/components/components/auth/PrimitiveOauthCallback\"}]},{\"text\":\"Documents\",\"items\":[{\"text\":\"PrimitiveManageDocuments\",\"link\":\"/reference/primitive-app/components/components/documents/PrimitiveManageDocuments\"},{\"text\":\"PrimitiveShareDocumentDialog\",\"link\":\"/reference/primitive-app/components/components/documents/PrimitiveShareDocumentDialog\"},{\"text\":\"PrimitiveSingleDocumentSwitcher\",\"link\":\"/reference/primitive-app/components/components/documents/PrimitiveSingleDocumentSwitcher\"}]},{\"text\":\"Navigation\",\"items\":[{\"text\":\"PrimitiveAppBreadcrumb\",\"link\":\"/reference/primitive-app/components/components/navigation/PrimitiveAppBreadcrumb\"},{\"text\":\"PrimitiveAppSidebarHeader\",\"link\":\"/reference/primitive-app/components/components/navigation/PrimitiveAppSidebarHeader\"},{\"text\":\"PrimitiveBottomNav\",\"link\":\"/reference/primitive-app/components/components/navigation/PrimitiveBottomNav\"},{\"text\":\"PrimitiveNavigationBadge\",\"link\":\"/reference/primitive-app/components/components/navigation/PrimitiveNavigationBadge\"},{\"text\":\"PrimitiveSidebarNav\",\"link\":\"/reference/primitive-app/components/components/navigation/PrimitiveSidebarNav\"},{\"text\":\"PrimitiveUserMenu\",\"link\":\"/reference/primitive-app/components/components/navigation/PrimitiveUserMenu\"}]},{\"text\":\"Shared\",\"items\":[{\"text\":\"DeleteConfirmationDialog\",\"link\":\"/reference/primitive-app/components/components/shared/DeleteConfirmationDialog\"},{\"text\":\"PrimitiveLogoSpinner\",\"link\":\"/reference/primitive-app/components/components/shared/PrimitiveLogoSpinner\"},{\"text\":\"PrimitiveSkeletonGate\",\"link\":\"/reference/primitive-app/components/components/shared/PrimitiveSkeletonGate\"}]}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Layouts\",\"items\":[{\"text\":\"PrimitiveAppLayout\",\"link\":\"/reference/primitive-app/components/layouts/PrimitiveAppLayout\"},{\"text\":\"PrimitiveLoginLayout\",\"link\":\"/reference/primitive-app/components/layouts/PrimitiveLoginLayout\"},{\"text\":\"PrimitiveStaticLayout\",\"link\":\"/reference/primitive-app/components/layouts/PrimitiveStaticLayout\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Pages\",\"items\":[{\"text\":\"PrimitiveNotFound\",\"link\":\"/reference/primitive-app/components/pages/PrimitiveNotFound\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Utils\",\"items\":[{\"text\":\"Logger\",\"link\":\"/reference/primitive-app/utils/Logger\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Composables\",\"items\":[{\"text\":\"useJsBaoDataLoader\",\"link\":\"/reference/primitive-app/composables/useJsBaoDataLoader\"},{\"text\":\"useTheme\",\"link\":\"/reference/primitive-app/composables/useTheme\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Config\",\"items\":[{\"text\":\"app-config\",\"link\":\"/reference/primitive-app/config/app-config\"},{\"text\":\"env-config\",\"link\":\"/reference/primitive-app/config/env-config\"},{\"text\":\"index\",\"link\":\"/reference/primitive-app/config/index\"},{\"text\":\"navigation-config\",\"link\":\"/reference/primitive-app/config/navigation-config\"}],\"collapsible\":true,\"collapsed\":true}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"js-bao-wss-client\",\"items\":[{\"text\":\"Classes\",\"items\":[{\"text\":\"JsBaoClient\",\"link\":\"/reference/js-bao-wss-client/api/classes/JsBaoClient\"},{\"text\":\"JsBaoError\",\"link\":\"/reference/js-bao-wss-client/api/classes/JsBaoError\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Functions\",\"items\":[{\"text\":\"initializeClient\",\"link\":\"/reference/js-bao-wss-client/api/functions/initializeClient\"},{\"text\":\"isJsBaoError\",\"link\":\"/reference/js-bao-wss-client/api/functions/isJsBaoError\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Interfaces\",\"items\":[{\"text\":\"AnalyticsAutoEventsOptions\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/AnalyticsAutoEventsOptions\"},{\"text\":\"AnalyticsClient\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/AnalyticsClient\"},{\"text\":\"AnalyticsEventInput\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/AnalyticsEventInput\"},{\"text\":\"AuthStateEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/AuthStateEvent\"},{\"text\":\"BasicUserInfo\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/BasicUserInfo\"},{\"text\":\"BlobUploadCompletedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/BlobUploadCompletedEvent\"},{\"text\":\"BlobUploadFailedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/BlobUploadFailedEvent\"},{\"text\":\"BlobUploadProgressEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/BlobUploadProgressEvent\"},{\"text\":\"CacheFacade\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/CacheFacade\"},{\"text\":\"DocumentAccessResult\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/DocumentAccessResult\"},{\"text\":\"DocumentCreateCommitFailedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/DocumentCreateCommitFailedEvent\"},{\"text\":\"DocumentEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/DocumentEvent\"},{\"text\":\"DocumentInfo\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/DocumentInfo\"},{\"text\":\"DocumentInvitation\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/DocumentInvitation\"},{\"text\":\"DocumentInvitationResponse\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/DocumentInvitationResponse\"},{\"text\":\"DocumentMetadataChangedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/DocumentMetadataChangedEvent\"},{\"text\":\"DocumentPermissionEntry\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/DocumentPermissionEntry\"},{\"text\":\"GeminiGenerateRawOptions\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/GeminiGenerateRawOptions\"},{\"text\":\"GeminiGenerateResult\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/GeminiGenerateResult\"},{\"text\":\"GeminiMessage\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/GeminiMessage\"},{\"text\":\"GeminiModelSummary\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/GeminiModelSummary\"},{\"text\":\"GeminiPromptOptions\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/GeminiPromptOptions\"},{\"text\":\"GeminiStructuredOutput\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/GeminiStructuredOutput\"},{\"text\":\"IntegrationCallRequest\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/IntegrationCallRequest\"},{\"text\":\"IntegrationCallResponse\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/IntegrationCallResponse\"},{\"text\":\"IntegrationsAPI\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/IntegrationsAPI\"},{\"text\":\"InvitationEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/InvitationEvent\"},{\"text\":\"JsBaoClientOptions\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/JsBaoClientOptions\"},{\"text\":\"JsBaoEvents\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/JsBaoEvents\"},{\"text\":\"LlmChatOptions\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/LlmChatOptions\"},{\"text\":\"MeUpdatedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/MeUpdatedEvent\"},{\"text\":\"MeUpdateFailedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/MeUpdateFailedEvent\"},{\"text\":\"NetworkModeEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/NetworkModeEvent\"},{\"text\":\"OfflineAuthEnabledEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/OfflineAuthEnabledEvent\"},{\"text\":\"OfflineAuthExpiringSoonEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/OfflineAuthExpiringSoonEvent\"},{\"text\":\"OfflineAuthFailedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/OfflineAuthFailedEvent\"},{\"text\":\"OfflineAuthRenewedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/OfflineAuthRenewedEvent\"},{\"text\":\"OfflineAuthUnlockedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/OfflineAuthUnlockedEvent\"},{\"text\":\"PendingCreateCommittedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/PendingCreateCommittedEvent\"},{\"text\":\"PendingCreateFailedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/PendingCreateFailedEvent\"},{\"text\":\"PermissionEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/PermissionEvent\"},{\"text\":\"ReasoningOptions\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/ReasoningOptions\"},{\"text\":\"SessionInfo\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/SessionInfo\"},{\"text\":\"StatusChangedEvent\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/StatusChangedEvent\"},{\"text\":\"UserProfile\",\"link\":\"/reference/js-bao-wss-client/api/interfaces/UserProfile\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Type Aliases\",\"items\":[{\"text\":\"GeminiContentPart\",\"link\":\"/reference/js-bao-wss-client/api/type-aliases/GeminiContentPart\"},{\"text\":\"GeminiGenerateOptions\",\"link\":\"/reference/js-bao-wss-client/api/type-aliases/GeminiGenerateOptions\"},{\"text\":\"GeminiRole\",\"link\":\"/reference/js-bao-wss-client/api/type-aliases/GeminiRole\"},{\"text\":\"JsBaoErrorCode\",\"link\":\"/reference/js-bao-wss-client/api/type-aliases/JsBaoErrorCode\"},{\"text\":\"TypedModelConstructor\",\"link\":\"/reference/js-bao-wss-client/api/type-aliases/TypedModelConstructor\"}],\"collapsible\":true,\"collapsed\":true}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"js-bao\",\"items\":[{\"text\":\"Classes\",\"items\":[{\"text\":\"BaseModel\",\"link\":\"/reference/js-bao/api/classes/BaseModel\"},{\"text\":\"DatabaseEngine\",\"link\":\"/reference/js-bao/api/classes/DatabaseEngine\"},{\"text\":\"DocumentClosedError\",\"link\":\"/reference/js-bao/api/classes/DocumentClosedError\"},{\"text\":\"DocumentResolutionError\",\"link\":\"/reference/js-bao/api/classes/DocumentResolutionError\"},{\"text\":\"Logger\",\"link\":\"/reference/js-bao/api/classes/Logger\"},{\"text\":\"ModelRegistry\",\"link\":\"/reference/js-bao/api/classes/ModelRegistry\"},{\"text\":\"RecordNotFoundError\",\"link\":\"/reference/js-bao/api/classes/RecordNotFoundError\"},{\"text\":\"StringSet\",\"link\":\"/reference/js-bao/api/classes/StringSet\"},{\"text\":\"UniqueConstraintViolationError\",\"link\":\"/reference/js-bao/api/classes/UniqueConstraintViolationError\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Functions\",\"items\":[{\"text\":\"attachAndRegisterModel\",\"link\":\"/reference/js-bao/api/functions/attachAndRegisterModel\"},{\"text\":\"attachSchemaToClass\",\"link\":\"/reference/js-bao/api/functions/attachSchemaToClass\"},{\"text\":\"autoRegisterModel\",\"link\":\"/reference/js-bao/api/functions/autoRegisterModel\"},{\"text\":\"createModelClass\",\"link\":\"/reference/js-bao/api/functions/createModelClass\"},{\"text\":\"defineModelSchema\",\"link\":\"/reference/js-bao/api/functions/defineModelSchema\"},{\"text\":\"dumpYDocToPlain\",\"link\":\"/reference/js-bao/api/functions/dumpYDocToPlain\"},{\"text\":\"Field\",\"link\":\"/reference/js-bao/api/functions/Field\"},{\"text\":\"generateULID\",\"link\":\"/reference/js-bao/api/functions/generateULID\"},{\"text\":\"initJsBao\",\"link\":\"/reference/js-bao/api/functions/initJsBao\"},{\"text\":\"Model\",\"link\":\"/reference/js-bao/api/functions/Model\"},{\"text\":\"resetJsBao\",\"link\":\"/reference/js-bao/api/functions/resetJsBao\"},{\"text\":\"summarizePlainYDoc\",\"link\":\"/reference/js-bao/api/functions/summarizePlainYDoc\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Interfaces\",\"items\":[{\"text\":\"ConnectedDocument\",\"link\":\"/reference/js-bao/api/interfaces/ConnectedDocument\"},{\"text\":\"DatabaseConfig\",\"link\":\"/reference/js-bao/api/interfaces/DatabaseConfig\"},{\"text\":\"DocumentConnectionEvent\",\"link\":\"/reference/js-bao/api/interfaces/DocumentConnectionEvent\"},{\"text\":\"DocumentManager\",\"link\":\"/reference/js-bao/api/interfaces/DocumentManager\"},{\"text\":\"DumpOptions\",\"link\":\"/reference/js-bao/api/interfaces/DumpOptions\"},{\"text\":\"DumpSummary\",\"link\":\"/reference/js-bao/api/interfaces/DumpSummary\"},{\"text\":\"DumpSummaryEntry\",\"link\":\"/reference/js-bao/api/interfaces/DumpSummaryEntry\"},{\"text\":\"FieldOptions\",\"link\":\"/reference/js-bao/api/interfaces/FieldOptions\"},{\"text\":\"InitJsBaoOptions\",\"link\":\"/reference/js-bao/api/interfaces/InitJsBaoOptions\"},{\"text\":\"InitJsBaoResult\",\"link\":\"/reference/js-bao/api/interfaces/InitJsBaoResult\"},{\"text\":\"ModelOptions\",\"link\":\"/reference/js-bao/api/interfaces/ModelOptions\"},{\"text\":\"PaginatedResult\",\"link\":\"/reference/js-bao/api/interfaces/PaginatedResult\"},{\"text\":\"PaginationOptions\",\"link\":\"/reference/js-bao/api/interfaces/PaginationOptions\"},{\"text\":\"QueryOptions\",\"link\":\"/reference/js-bao/api/interfaces/QueryOptions\"},{\"text\":\"SaveOptions\",\"link\":\"/reference/js-bao/api/interfaces/SaveOptions\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Type Aliases\",\"items\":[{\"text\":\"DocumentConnectionCallback\",\"link\":\"/reference/js-bao/api/type-aliases/DocumentConnectionCallback\"},{\"text\":\"DocumentFilter\",\"link\":\"/reference/js-bao/api/type-aliases/DocumentFilter\"},{\"text\":\"DocumentPermissionHint\",\"link\":\"/reference/js-bao/api/type-aliases/DocumentPermissionHint\"},{\"text\":\"InferAttrs\",\"link\":\"/reference/js-bao/api/type-aliases/InferAttrs\"},{\"text\":\"ModelConstructor\",\"link\":\"/reference/js-bao/api/type-aliases/ModelConstructor\"},{\"text\":\"PlainYDoc\",\"link\":\"/reference/js-bao/api/type-aliases/PlainYDoc\"},{\"text\":\"ProjectionSpec\",\"link\":\"/reference/js-bao/api/type-aliases/ProjectionSpec\"},{\"text\":\"QueryResult\",\"link\":\"/reference/js-bao/api/type-aliases/QueryResult\"}],\"collapsible\":true,\"collapsed\":true}],\"collapsible\":true,\"collapsed\":true}],\"collapsible\":true,\"collapsed\":true}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Primitive-Labs/primitive-docs\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>