import{_ as e,c as s,o as a,aj as t}from"./chunks/framework.HLg5PcC2.js";const k=JSON.parse('{"title":"createPrimitiveApp","description":"","frontmatter":{},"headers":[],"relativePath":"reference/primitive-app/createPrimitiveApp.md","filePath":"reference/primitive-app/createPrimitiveApp.md"}'),n={name:"reference/primitive-app/createPrimitiveApp.md"};function o(l,i,p,r,h,d){return a(),s("div",null,[...i[0]||(i[0]=[t(`<h1 id="createprimitiveapp" tabindex="-1">createPrimitiveApp <a class="header-anchor" href="#createprimitiveapp" aria-label="Permalink to “createPrimitiveApp”">​</a></h1><p><code>createPrimitiveApp()</code> is <code>primitive-app</code>’s opinionated bootstrap helper for wiring a <strong>Vue 3 + Pinia + vue-router</strong> app into <strong>js-bao-wss-client</strong> plus the shared <code>primitive-app</code> stores.</p><p>It’s exported from <code>primitive-app</code>’s entrypoint (so you can <code>import { createPrimitiveApp } from &quot;primitive-app&quot;</code>), and implemented in <code>packages/primitive-app/src/createPrimitiveApp.ts</code>.</p><h2 id="what-it-does" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does" aria-label="Permalink to “What it does”">​</a></h2><p>At a high level, <code>createPrimitiveApp()</code>:</p><ul><li>Applies an optional global log level override (<code>getLogLevel</code>)</li><li>Creates the Vue app and installs Pinia</li><li>Initializes js-bao client configuration (<code>getJsBaoConfig</code>) and the user/auth store (using <code>loginUrl</code>)</li><li>Initializes the app config store (<code>getAppConfig</code>)</li><li>Wires document-store behavior based on <code>documentStoreMode</code> (single-document, multi-doc, or none)</li><li>Sets up page title syncing using breadcrumbs + router (when running in the browser)</li><li>Mounts the app (defaults to <code>&quot;#app&quot;</code>)</li></ul><h2 id="signature" tabindex="-1">Signature <a class="header-anchor" href="#signature" aria-label="Permalink to “Signature”">​</a></h2><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createPrimitiveApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PrimitiveAppBootstrapOptions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PrimitiveAppBootstrapResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="options-primitiveappbootstrapoptions" tabindex="-1">Options (<code>PrimitiveAppBootstrapOptions</code>) <a class="header-anchor" href="#options-primitiveappbootstrapoptions" aria-label="Permalink to “Options (PrimitiveAppBootstrapOptions)”">​</a></h2><ul><li><strong>Required</strong><ul><li><code>mainComponent</code>: your root Vue component (often <code>App.vue</code>)</li><li><code>router</code>: your <code>vue-router</code> instance</li><li><code>getAppConfig</code>: returns <code>InitializeAppConfigOptions</code> for the app config store</li><li><code>getJsBaoConfig</code>: returns js-bao-wss-client configuration (passed to <code>initializeJsBao</code>)</li><li><code>loginUrl</code>: route path used by auth flows (commonly <code>&quot;/login&quot;</code>)</li></ul></li><li><strong>Optional</strong><ul><li><code>getNavigationConfig</code>: initializes the navigation store for the main app area</li><li><code>getSingleDocumentConfig</code>: required when <code>documentStoreMode</code> is <code>SingleDocument</code> or <code>SingleDocumentWithSwitching</code></li><li><code>getLogLevel</code>: overrides the internal logger’s default level</li><li><code>mountTarget</code>: CSS selector or element (defaults to <code>&quot;#app&quot;</code>)</li></ul></li></ul><h2 id="document-store-modes" tabindex="-1">Document store modes <a class="header-anchor" href="#document-store-modes" aria-label="Permalink to “Document store modes”">​</a></h2><p>The document-store wiring is controlled by <code>documentStoreMode</code> from <code>getAppConfig()</code>:</p><ul><li><code>DocumentStoreMode.None</code>: no document stores are initialized</li><li><code>DocumentStoreMode.SingleDocument</code> / <code>DocumentStoreMode.SingleDocumentWithSwitching</code>: <ul><li>requires <code>getSingleDocumentConfig</code></li><li>initializes <code>jsBaoDocumentsStore</code> and then <code>singleDocumentStore</code> on authentication</li><li>resets them on logout</li></ul></li><li><code>DocumentStoreMode.MultiDoc</code>: <ul><li>initializes <code>jsBaoDocumentsStore</code> on authentication</li><li>resets it (and <code>multiDocumentStore</code>) on logout</li><li>collections are registered dynamically by the app via <code>multiDocumentStore.registerCollection(...)</code></li></ul></li></ul><h2 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to “Example”">​</a></h2><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/main.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createPrimitiveApp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;primitive-app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> App </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./App.vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> router </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./router/routes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getAppConfig, getSingleDocumentConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./config/appConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getJsBaoConfig, getLogLevel } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./config/envConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getNavigationConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./config/navigationConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createPrimitiveApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainComponent: App,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  router,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  getAppConfig,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  getJsBaoConfig,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  getNavigationConfig,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  getSingleDocumentConfig,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  loginUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  getLogLevel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="related-reference-pages" tabindex="-1">Related reference pages <a class="header-anchor" href="#related-reference-pages" aria-label="Permalink to “Related reference pages”">​</a></h2><ul><li><a href="/primitive-docs/reference/primitive-app/composables/useJsBaoDataLoader.html"><code>useJsBaoDataLoader</code></a></li><li><a href="/primitive-docs/reference/primitive-app/composables/useTheme.html"><code>useTheme</code></a></li></ul>`,17)])])}const g=e(n,[["render",o]]);export{k as __pageData,g as default};
