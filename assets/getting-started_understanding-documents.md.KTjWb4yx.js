import{_ as i,c as a,o as e,aj as t}from"./chunks/framework.HLg5PcC2.js";const c=JSON.parse('{"title":"Understanding Documents","description":"","frontmatter":{},"headers":[],"relativePath":"getting-started/understanding-documents.md","filePath":"getting-started/understanding-documents.md"}'),n={name:"getting-started/understanding-documents.md"};function l(h,s,p,r,o,d){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="understanding-documents" tabindex="-1">Understanding Documents <a class="header-anchor" href="#understanding-documents" aria-label="Permalink to “Understanding Documents”">​</a></h1><p>In Primitive, a <strong>document</strong> is the fundamental unit of data storage, sync, and sharing. Understanding how documents work is essential to designing your app well.</p><h2 id="what-is-a-document" tabindex="-1">What is a Document? <a class="header-anchor" href="#what-is-a-document" aria-label="Permalink to “What is a Document?”">​</a></h2><p>A document is a container that holds your js-bao model objects. Think of it like a self-contained database that can be:</p><ul><li><strong>Synced</strong> — Changes flow to the server and other clients automatically</li><li><strong>Shared</strong> — You control who can access the data</li><li><strong>Stored offline</strong> — Persisted locally for offline access</li></ul><p>Every piece of data in your app lives inside a document. When you save a <code>Task</code> or a <code>Project</code>, it&#39;s stored in a specific document.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>┌─────────────────────────────────────────┐</span></span>
<span class="line"><span>│              Document                    │</span></span>
<span class="line"><span>│  ┌─────────────┐  ┌─────────────┐       │</span></span>
<span class="line"><span>│  │   Task 1    │  │  Project A  │       │</span></span>
<span class="line"><span>│  │   Task 2    │  │  Project B  │       │</span></span>
<span class="line"><span>│  │   Task 3    │  │             │       │</span></span>
<span class="line"><span>│  └─────────────┘  └─────────────┘       │</span></span>
<span class="line"><span>│                                          │</span></span>
<span class="line"><span>│  Owner: alice@example.com               │</span></span>
<span class="line"><span>│  Shared with: bob@example.com (editor)  │</span></span>
<span class="line"><span>└─────────────────────────────────────────┘</span></span></code></pre></div><h2 id="documents-are-private-by-default" tabindex="-1">Documents Are Private by Default <a class="header-anchor" href="#documents-are-private-by-default" aria-label="Permalink to “Documents Are Private by Default”">​</a></h2><p>All documents belong to a user and are <strong>private by default</strong>. Only the owner can see and modify the data—until they explicitly share it.</p><p>This is fundamentally different from traditional apps where data typically lives in a shared database. In Primitive:</p><ul><li>Users own their data</li><li>Sharing is opt-in and explicit</li><li>Collaboration happens at the document level</li></ul><h2 id="the-sharing-model" tabindex="-1">The Sharing Model <a class="header-anchor" href="#the-sharing-model" aria-label="Permalink to “The Sharing Model”">​</a></h2><p>When you share a document, you grant another user a permission level:</p><table tabindex="0"><thead><tr><th>Permission</th><th>Can View</th><th>Can Edit</th><th>Can Share</th><th>Can Delete</th></tr></thead><tbody><tr><td><code>reader</code></td><td>✓</td><td></td><td></td><td></td></tr><tr><td><code>read-write</code></td><td>✓</td><td>✓</td><td></td><td></td></tr><tr><td><code>owner</code></td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr></tbody></table><p>Sharing happens via email invitation:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Share a document with another user</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> documentsStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shareDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  documentId, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;colleague@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;read-write&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>The invited user receives the document in their pending invitations and can accept or decline.</p><h3 id="real-time-collaboration" tabindex="-1">Real-Time Collaboration <a class="header-anchor" href="#real-time-collaboration" aria-label="Permalink to “Real-Time Collaboration”">​</a></h3><p>When multiple users have access to the same document, they&#39;re collaborating in real-time:</p><ul><li>Changes sync instantly between all connected users</li><li>No conflicts—the system handles concurrent edits automatically</li><li>Users can see who else is viewing/editing (awareness)</li></ul><h2 id="document-size-guidelines" tabindex="-1">Document Size Guidelines <a class="header-anchor" href="#document-size-guidelines" aria-label="Permalink to “Document Size Guidelines”">​</a></h2><p>Documents are designed to hold approximately <strong>10MB of data</strong> each. This is a soft limit—you won&#39;t hit a hard wall, but performance may degrade with very large documents.</p><p>For most apps, this is plenty:</p><ul><li>Thousands of tasks, notes, or records</li><li>Hundreds of projects with details</li><li>Years of personal data</li></ul><p>If you&#39;re building something that might exceed this (media libraries, extensive logs), consider splitting data across multiple documents.</p><h2 id="choosing-a-document-pattern" tabindex="-1">Choosing a Document Pattern <a class="header-anchor" href="#choosing-a-document-pattern" aria-label="Permalink to “Choosing a Document Pattern”">​</a></h2><p>How you structure documents depends on your app&#39;s sharing needs. Here are the common patterns.</p><h3 id="pattern-1-single-document-personal-apps" tabindex="-1">Pattern 1: Single Document (Personal Apps) <a class="header-anchor" href="#pattern-1-single-document-personal-apps" aria-label="Permalink to “Pattern 1: Single Document (Personal Apps)”">​</a></h3><p><strong>Best for:</strong> Personal tools, single-user apps, no sharing needed</p><p>Each user gets exactly one document that holds all their data. The document is opened on app load / user sign-in. No document management UI is needed.</p><p><strong>Examples:</strong> Personal task manager, habit tracker, journal app, budgeting tool</p><p><strong>User experience:</strong> Users sign in and immediately see their data. No concept of &quot;documents&quot; is exposed in the UI.</p><p><strong>Implementation using aliases:</strong></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// On app initialization after user is authenticated</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Use aliases for atomic get-or-create of a unique default document</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> aliasParams</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { scope: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, aliasKey: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default-doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Try to open by alias (common case - document already exists)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openAlias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aliasParams);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Alias doesn&#39;t exist - create document with alias atomically</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Server prevents duplicates if another client creates simultaneously</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createWithAlias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My Data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alias: aliasParams,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result.documentId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="pattern-2-one-document-at-a-time-workspaces" tabindex="-1">Pattern 2: One Document at a Time (Workspaces) <a class="header-anchor" href="#pattern-2-one-document-at-a-time-workspaces" aria-label="Permalink to “Pattern 2: One Document at a Time (Workspaces)”">​</a></h3><p><strong>Best for:</strong> Apps where users create discrete projects or workspaces they might share</p><p>Users have multiple documents but work in one at a time. They can create new documents, switch between them, and share each with different people.</p><p><strong>Examples:</strong></p><ul><li>Accounting app (one document per company)</li><li>Project management (one document per project)</li><li>Shared shopping lists (one list per household)</li></ul><p><strong>User experience:</strong> Users see a document switcher in the UI. They can create new workspaces, rename them, share them with teammates, and switch between them.</p><p><strong>UI Components:</strong> The <code>primitive-app</code> library provides components for this pattern:</p><ul><li><p><strong><code>PrimitiveDocumentSwitcher</code></strong> — A dropdown menu for the sidebar header. Shows the current document name, lists available documents for quick switching, displays pending invitation badges, and links to a &quot;Manage Documents&quot; page.</p></li><li><p><strong><code>PrimitiveDocumentList</code></strong> — A full document management interface. Displays documents in a table (desktop) or list (mobile) with support for renaming, sharing, deleting, and accepting invitations.</p></li></ul><p><strong>Implementation:</strong></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// List available documents</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> documents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Open the selected document</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selectedDocumentId);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Create a new document/workspace</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;New Project&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tags: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(metadata.documentId);</span></span></code></pre></div><h3 id="pattern-3-multiple-documents" tabindex="-1">Pattern 3: Multiple Documents <a class="header-anchor" href="#pattern-3-multiple-documents" aria-label="Permalink to “Pattern 3: Multiple Documents”">​</a></h3><p><strong>Best for:</strong> Apps that need to query across multiple documents, each with different sharing contexts</p><p>Apps can manage opening and closing documents as needed. All documents that need to receive live updates or be queried across must be open.</p><p><strong>Examples:</strong></p><ul><li>Chat app (one document per channel, multiple channels visible)</li><li>Multi-tenant dashboard (separate data per client)</li><li>Collaborative workspace with distinct data collections</li></ul><p><strong>User experience:</strong> The app manages which documents are open. Users might see a list of channels, each backed by a separate document with its own sharing settings.</p><p><strong>Implementation:</strong></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get all documents with a specific tag</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> documents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> channels</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">doc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc.tags?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;channel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Open all channel documents</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  channels.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ch.documentId))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Query runs across all open documents by default</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({});</span></span></code></pre></div><h2 id="the-root-document" tabindex="-1">The Root Document <a class="header-anchor" href="#the-root-document" aria-label="Permalink to “The Root Document”">​</a></h2><p>Every user has a special <strong>root document</strong> that is automatically opened by primitive-app. This document is reserved exclusively for user preferences (like theme settings, last-used document ID, etc.).</p><div class="warning custom-block"><p class="custom-block-title">Important</p><p><strong>Never store application data in the root document.</strong> It should only contain user preferences. Application data belongs in separate documents using the patterns described above.</p></div><h2 id="document-aliases" tabindex="-1">Document Aliases <a class="header-anchor" href="#document-aliases" aria-label="Permalink to “Document Aliases”">​</a></h2><p>Aliases provide a way to reference documents by name instead of ID. They&#39;re particularly useful for the Single Document pattern where you need atomic get-or-create semantics.</p><p><strong>Alias scopes:</strong></p><ul><li><code>&quot;user&quot;</code> — Unique per user (each user can have their own document with this alias)</li><li><code>&quot;app&quot;</code> — Unique across the entire app (shared by all users)</li></ul><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Resolve an alias to get document info</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> aliasInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.aliases.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  scope: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  aliasKey: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-settings&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Set an alias for an existing document</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.aliases.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  scope: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  aliasKey: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  documentId: existingDocId</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Create a document with an alias atomically</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsBaoClient.documents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createWithAlias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  alias: { scope: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, aliasKey: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="designing-your-document-structure" tabindex="-1">Designing Your Document Structure <a class="header-anchor" href="#designing-your-document-structure" aria-label="Permalink to “Designing Your Document Structure”">​</a></h2><p>When planning your app, ask yourself:</p><p><strong>&quot;What sets of data might users want to share with different people?&quot;</strong></p><p>Each answer is potentially a document boundary:</p><table tabindex="0"><thead><tr><th>If users share...</th><th>Consider...</th></tr></thead><tbody><tr><td>Nothing</td><td>Single Document pattern</td></tr><tr><td>Entire app data with a team</td><td>One Document at a Time pattern</td></tr><tr><td>Different projects with different people</td><td>One Document at a Time pattern</td></tr><tr><td>Multiple data sets simultaneously</td><td>Multiple Documents pattern</td></tr></tbody></table><h3 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to “Best Practices”">​</a></h3><ol><li><p><strong>Model relationships using model IDs</strong> — Use model IDs to connect records, not document IDs. Only use documentIds when required for APIs (sharing, save location).</p></li><li><p><strong>Use model IDs in routes</strong> — Reference specific records by their model ID, not the document they&#39;re in.</p></li><li><p><strong>Don&#39;t over-segment</strong> — More documents means more complexity. Start simple.</p></li><li><p><strong>Think about the sharing story</strong> — If two pieces of data should always be shared together, they belong in the same document.</p></li><li><p><strong>Never iterate over documents to query</strong> — js-bao queries operate over ALL open documents automatically. Filter results by documentId or other fields in the query itself if needed.</p></li></ol><h2 id="documents-and-queries" tabindex="-1">Documents and Queries <a class="header-anchor" href="#documents-and-queries" aria-label="Permalink to “Documents and Queries”">​</a></h2><p>When you query data with js-bao, the query runs across <strong>all open documents</strong> by default. This is usually what you want—your code doesn&#39;t need to know which document data lives in.</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Finds all active projects across all open documents</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> projects</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Project.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ archived: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><p>You can restrict queries to specific documents when needed:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Query only within a specific document</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> projects</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Project.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { archived: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { documents: specificDocumentId }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>For more on querying, see <a href="./working-with-data.html">Working with Data</a>.</p><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to “Next Steps”">​</a></h2><ul><li><strong><a href="./working-with-data.html">Working with Data</a></strong> — Define models and perform CRUD operations</li><li><strong><a href="./other-services.html">Other Services</a></strong> — Explore blob storage, AI, and more</li></ul>`,75)])])}const g=i(n,[["render",l]]);export{c as __pageData,g as default};
